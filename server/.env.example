# =============================================================================
# L-File Usogui Fansite - Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development  # Options: 'development', 'test', 'production'

# -----------------------------------------------------------------------------
# Database Configuration (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# Get these values from your Supabase project dashboard:
# https://supabase.com/dashboard/project/YOUR_PROJECT/settings/database
#
# For local PostgreSQL development:
#   DATABASE_HOST=localhost
#   DATABASE_SSL=false
#
# For Supabase:
#   DATABASE_HOST=db.your-project-ref.supabase.co
#   DATABASE_SSL=true
#
DATABASE_HOST=db.your-project-ref.supabase.co
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=your_supabase_db_password
DATABASE_NAME=postgres

# SSL is required for Supabase connections (set to 'false' for local PostgreSQL)
DATABASE_SSL=true

# -----------------------------------------------------------------------------
# Database Safety Controls
# -----------------------------------------------------------------------------
# SECURITY WARNING: Schema sync can destroy data by dropping columns/tables!
# - In development: You can set to 'true' for convenience, but be careful
# - In production: MUST be 'false' - use migrations instead
# - Default is 'false' to prevent accidental data loss
ENABLE_SCHEMA_SYNC=false
RUN_MIGRATIONS=false  # Set to 'true' to run migrations on startup

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Generate a strong secret: openssl rand -base64 64
JWT_SECRET=your_jwt_secret_key_here_make_it_strong_and_unique
JWT_EXPIRES=1d

# -----------------------------------------------------------------------------
# Fluxer OAuth2 Authentication
# -----------------------------------------------------------------------------
# Create an application at: https://fluxer.app/developers
FLUXER_CLIENT_ID=your_fluxer_client_id
FLUXER_CLIENT_SECRET=your_fluxer_client_secret
FLUXER_CALLBACK_URL=http://localhost:3001/api/auth/fluxer/callback

# Your Fluxer user ID for admin access
ADMIN_FLUXER_ID=your_fluxer_user_id_for_admin_access

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
FRONTEND_URL=http://localhost:3000

# For production, set allowed origins (comma-separated)
# CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# -----------------------------------------------------------------------------
# Email Service (Resend)
# -----------------------------------------------------------------------------
# Get your API key at: https://resend.com
RESEND_API_KEY=your_resend_api_key

# -----------------------------------------------------------------------------
# Backblaze B2 Storage
# -----------------------------------------------------------------------------
# Get credentials at: https://www.backblaze.com/b2/cloud-storage.html
B2_APPLICATION_KEY_ID=your_b2_application_key_id
B2_APPLICATION_KEY=your_b2_application_key
B2_BUCKET_NAME=your_b2_bucket_name
B2_BUCKET_ID=your_b2_bucket_id

# Optional: Custom domain for CDN serving (leave empty if not using)
# B2_CUSTOM_DOMAIN=https://cdn.yourdomain.com

# -----------------------------------------------------------------------------
# Rate Limiting (Optional - defaults shown)
# -----------------------------------------------------------------------------
# General API rate limiting
# RATE_LIMIT_WINDOW_MS=900000      # 15 minutes in ms
# RATE_LIMIT_MAX=2000              # Max requests per window

# Auth endpoint rate limiting (stricter for security)
# AUTH_RATE_LIMIT_WINDOW_MS=3600000  # 1 hour in ms
# AUTH_RATE_LIMIT_MAX=50             # Max auth attempts per window (production)

# -----------------------------------------------------------------------------
# Integrations (Optional)
# -----------------------------------------------------------------------------
# Ko-fi webhook verification token
# KOFI_WEBHOOK_TOKEN=your_kofi_webhook_token

# -----------------------------------------------------------------------------
# Development Only - DO NOT SET IN PRODUCTION
# -----------------------------------------------------------------------------
# Secret required for dev-login bypass endpoint
# Generate with: openssl rand -hex 32
# SECURITY: This should NEVER be set in production environments!
# DEV_BYPASS_SECRET=your_random_dev_secret_here
